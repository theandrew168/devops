---
server_hostname: bloggulus
server_mounted_volumes:
  - /mnt/bloggulus_db

caddy_config: |
  {
    servers {
      timeouts {
        read_body   10s
        read_header 5s
        write       30s
        idle        5m
      }
    }
  }
  www.bloggulus.com {
    redir https://bloggulus.com{uri} permanent
  }
  bloggulus.com {
    reverse_proxy 127.0.0.1:5000
  }

postgresql_version: 14
postgresql_data_dir: /mnt/bloggulus_db/data

postgresql_users:
  - username: bloggulus
    password: !vault |
      $ANSIBLE_VAULT;1.1;AES256
      62623632383038306239663663373433663333326330643730383362336239376162613438366465
      3164316336366333373835663238323433656161396561620a353562383532656261653862336539
      30663831323236666236623437653030656661613136306135396565373136393561343136653630
      3366383936363938370a343038663436333661633336386139316537303938313235666166613562
      61616562646138373237336434343164326530313666646437396266336564386563346262636539
      3762646334653764636266303538636432383937626337613730

postgresql_databases:
  - name: bloggulus
    owner: bloggulus

# DB Version: 14
# OS Type: linux
# DB Type: web
# Total Memory (RAM): 1 GB
# CPUs num: 1
# Connections num: 50
# Data Storage: san
postgresql_tuning_parameters:
  - name: max_connections
    value: 50
  - name: shared_buffers
    value: 256MB
  - name: effective_cache_size
    value: 768MB
  - name: maintenance_work_mem
    value: 64MB
  - name: checkpoint_completion_target
    value: 0.9
  - name: wal_buffers
    value: 7864kB
  - name: default_statistics_target
    value: 100
  - name: random_page_cost
    value: 1.1
  - name: effective_io_concurrency
    value: 300
  - name: work_mem
    value: 655kB
  - name: min_wal_size
    value: 1GB
  - name: max_wal_size
    value: 4GB

bloggulus_config: !vault |
  $ANSIBLE_VAULT;1.1;AES256
  61343065306232393862356639373735353963613666336564373161306266396431383731336531
  3364633633366237633134373432383630376433643235310a373334336364336235343361313634
  35323436633732633265306331663137353264373462363937613936316534376238666662633666
  6538316364386165630a626634353533343963393530373639303130656235393531303662313431
  36306431656439373963323738383663383633376561306436616263346437633634663831363331
  31626436643132343566333538353464666131356562333737386666323364646430383733653664
  36643736386130383261393431663063633764373662636532666666376561656266313937666631
  61646561343036643934373362343562316562386563323231363736626666323037613534626632
  64613831363764323865643763616533356536333835326636316135316662663566333665613430
  37336135633366396261353962626666333234646561613737396134353736643764336464383261
  66363831316666323231323733613433633538393039366438346661633035623262386531626366
  34373439663437313336373239663732666337616261383066313230663133323135363563633639
  36313431396665663666633731313262383930393731393536663133376264643661386137313631
  32383538383366646661633330623264656363346137306332343931646666613031373462663739
  31323232386435363264373166346161306632336430336265346432393538346432346332356239
  61363537333833663165353437643433333435663435303639363336366362313362613836353935
  63623762353434323237643833623537336630313263636631373161633333626439363936623338
  38646230636434613333633138643663393864653935633130353338316435666338386633643337
  35653835626138313363623434383033353533373965306665656337393433333033333563333737
  65666330613866316334613737353031376435303663396338613135356465656230343839343336
  38623464636632386563366637623236646535646335373630643135643962353136393436356137
  36323134373636653536353764326331633161643866323033353431383833643337353131656136
  62303639316662646264643038363536613433636439323865626562373330313531303131613634
  36363034356564643464303431376137343230616233633335633766346439623965656132366631
  33383265353434333331383239643736353462323730326533343936643633613535336331613633
  62656238336632353466323761663562303962653165633730343436306135313231633637333165
  37306465316133353033613732383165613262646533646462626537653432636166376461663633
  62303963373034316133316163643661643930333163353866623537633939623238393434323636
  32653764313963323361383436363463616566396539303938656339643735636339336236646333
  39663866366263636264323461653663323533303562356138393330353332383063336331666631
  30666234373636366263633065613036383535323331643963633334336461393964373365336162
  61356134616434383137363335376532323339333030323234356532353738613362373366636139
  65386236376338656633356134653562396430376266646631333935653861343735396665383435
  30373562323937633565323865336337386534373363623066653166343338313063646638313037
  38366432356630316630326132376338616239313237356633323138653066353030373963303835
  38333132653563343062613833386461646335303337336262363438346531323666363862636237
  38343831333136376666396664313935313266393834386238346433393163393030666566653061
  31323265383932333262663265346230323563303266613162323466613831646361383630313339
  30376530396161333165626230643864323261646433306661386431383264346232636630393962
  33396166303065623835313163343736303663323932306336653464396365633165376561663563
  34323032326430393935386164323235646663643961633463666364323838636137303330613363
  31643866326632663330326239373531353866376637663530333163353934373564353332323033
  39633865646164346436633330663038613535316232333538613939326436313164663461636630
  38373761333830313838383065646563346339313730373736303466373565646531303865616335
  32323061646263303062626464336461313839663063343539393232333566333662613430356637
  35636533306436363836643738333463366664663539306262376133616636326234313635323339
  61643361643934326530303330623536386462613161643164616436653863656430343661623931
  31616238623861353330333965366533323566643632643764643666643838323162383031623339
  31306662396662643634383234663763366432346532336433366431323831326135613865376366
  38346562616630346536346534613635313939343161663166663731336437393631376462313233
  37373231373732336266353331383666303762303261666639376434613630346263333733616663
  64633230633837663062

pg2s3_config: !vault |
  $ANSIBLE_VAULT;1.1;AES256
  64333736623330666566353331313337336434656431396535346666366539396634633031643330
  6332626532356263383932356662363237636664633262610a363634663032363032353865613538
  64656239336262383031613163346366326634663364633837646661613464363238623235333136
  3837663336393231390a353137353864346134366534313232343233623364653037663862626233
  63353437393237353733393063316534373137353562623636623733646363303331393562313932
  39303438383935616563353962363333646539356437643836633233663764656138383636303035
  32383734363133663039626665306261316664643666616536353236386135353661346463323234
  37646531613461313363323531373763633962386162356161613236303061663466386562393432
  38643337326332373437343731326430353930393164666639303133626134303366383336646133
  62366531373934643233313133653834613733623362373037623163636465666361636537373432
  61656232383130323061363465346231613539353235393438653162373562393432346665633064
  32343237366136646262383062623832343066643333633038663065666261363662616362643538
  35363765366635343962353739376231373039316239346265626230303962616139613364613933
  38393032336264383231646331666663323561643130363635353462656335633533346265346363
  38623562663463313234653137643231616262313764636261643365386436306139393766306639
  62393236623238303334623862393430393536333763366264666336613765373235613432373633
  37303131323665343538323636366238636261306562633561613262653934306565643661326330
  64323236663330313734363638653964353263656366623031353138653665633165363234333166
  36326137386439373335346564366238316566343737333137343734396262346636353234626334
  38396135626661353235633634613836383539366438646263316637633337636633376438643862
  61623937636466383635346338356265656331616663383863643463353631303030313663616466
  36616365623861346538366336313161306263306135303835386161366230623163326334373763
  32376464663231353938356433363535393563616336643332376435306631376534356434303035
  66626131363934363630613061393731643239303139653937633137346435313064386434323064
  64323739633738303330616532643934363933323532366238353462353538663164363338376634
  3064323437383734386533653032353166613630623236643831

---
server_hostname: bloggulus
server_mounted_volumes:
  - /mnt/bloggulus_db

postgresql_data_dir: /mnt/bloggulus_db/data
postgresql_unix_domain_socket_only: true

postgresql_users:
  - username: bloggulus
    password: !vault |
      $ANSIBLE_VAULT;1.1;AES256
      62623632383038306239663663373433663333326330643730383362336239376162613438366465
      3164316336366333373835663238323433656161396561620a353562383532656261653862336539
      30663831323236666236623437653030656661613136306135396565373136393561343136653630
      3366383936363938370a343038663436333661633336386139316537303938313235666166613562
      61616562646138373237336434343164326530313666646437396266336564386563346262636539
      3762646334653764636266303538636432383937626337613730

postgresql_databases:
  - name: bloggulus
    owner: bloggulus

# DB Version: 14
# OS Type: linux
# DB Type: web
# Total Memory (RAM): 1 GB
# CPUs num: 1
# Connections num: 50
# Data Storage: san
postgresql_tuning_parameters:
  - name: max_connections
    value: "50"
  - name: shared_buffers
    value: "256MB"
  - name: effective_cache_size
    value: "768MB"
  - name: maintenance_work_mem
    value: "64MB"
  - name: checkpoint_completion_target
    value: "0.9"
  - name: wal_buffers
    value: "7864kB"
  - name: default_statistics_target
    value: "100"
  - name: random_page_cost
    value: "1.1"
  - name: effective_io_concurrency
    value: "300"
  - name: work_mem
    value: "655kB"
  - name: min_wal_size
    value: "1GB"
  - name: max_wal_size
    value: "4GB"

mfd_config_path: /usr/local/src/bloggulus-svelte/mfd.toml
mfd_config: |
  [repo]
  url = "https://github.com/theandrew168/bloggulus-svelte"

  [build]
  commands = [
      ["npm", "install"],
      ["npm", "run", "build"],
  ]

caddy_config: |
  {
    servers {
      timeouts {
        read_body   10s
        read_header 5s
        write       30s
        idle        5m
      }
    }
  }
  www.bloggulus.com {
    redir https://bloggulus.com{uri} permanent
  }
  bloggulus.com {
    reverse_proxy 127.0.0.1:3000
  }

bloggulus_config: !vault |
  $ANSIBLE_VAULT;1.1;AES256
  34643138363332393339383433393632643363613465383238363162323863663636666362336138
  6139313939373038363835313433306266376230656163610a636365616137333062356532343632
  36636439326238303531626463643134333062313131356636326335353334356264623033363132
  6266303535626465300a646131626465376466616462653361666463653536323461656530633962
  33303232613764306232386538306132633739313662353937643638633365346362333033613935
  39326563333031613934383461363737353965366634636135333362623937363833643762303838
  65663630373862356133613665623362663434326531353635366361366439326633353938393636
  64623531646365663537376638623736363931666131383936316636326239663037396631663364
  33613535313466343538643165633331343330613339636538366164363336303631616637333332
  38393636336564353437633563366364346464373637383566373164333565643739326561336161
  31356430336234343962393535333434336664396436636531616237633839333639323031393433
  35613362666534383264316665663337326337306165313335343831303135616363326133653736
  66313738346132646135353936303865313562343236353039373663373938323030656366373931
  65613732613465306165333566353332326138643961313738376533653738653432376439343336
  63333865373532313337653234343037356161303633653365386232373437636437346231653533
  38663134373363373533336339653138343432306336383463363861393261333761643438656239
  33396432343362353334663236363563366337643564306663373362353731393835356362303037
  33386562396231396466323732343932343764643166366335633963333735313665373331383635
  30316163373538643039643831373938326263396533393537316164656261616339623032356338
  34333161343665323733663138306265376338333864633737373966643062613939346162623633
  35396338663532393264306461376532393538303639343935636535326264333239646130623734
  32336638396132323233326433373566343536633235303766646162343330373165663265393663
  62633139343836373336656336323838653634353764306565303632376437306135643530323564
  38643365326633663766353539356234633464623437343363653935343463636339623435366332
  34306339383838393163613564303637313735353562366564326664623832623763623462393763
  66376335363562643139396336306661643063316436623731656633623338316661356334393439
  33333334633336643665633139656262646636663532376334373634373336656533343333326232
  32336639646436316438326436383337366261393866336131356534636130353230353231663565
  39663639653734633863356462333935396462646138656133383636313039333033643965643831
  63646361623663333330666166383038356262653064373266326661376131353639343863383437
  66353963366663363535313862393938646164393532636132653230613964616434323736323662
  36613836336236356364356165333735366130363039343263353639633135656539326436666439
  63306662393765626466653035616237386639623735383161393261303264356565383761643937
  39336531303064633131636435323732633134666261393439343330663330373338653033366661
  61636334333731306435323965636634313630623164323739663731383432326335306539663634
  35383937616663336561396238323261313661383838393130373236636166376566366461663137
  38373037646264363036343966613231383135363537316263623432646635363563626463313433
  31343863333235393331363965313038366465633139653365316265633631303763656264373166
  39393436353964343662623637316235663338633932343164396461393435643337636336336661
  64636261373365333166646439316364313136646338383836393264313665633364393561353364
  66333633363939356464656638396631646333666536616539346666303961643636666563383935
  66383739343736666133303130623735373833636533363931356434643136393337343037323934
  63643931326334343061323034643865323365386466623465353634646533646437343231306438
  32353239636364663336633362333134636535663231396262363135616339356466333365646339
  32626661636432623464396335376231323838376232343534653937316265643733383865333633
  34663135383365343966623731383062373835343661663731393735333135373263343338363566
  35336236633039386538343161636233336132326239656432323439316635646161643637656537
  64313162343763366263346234656239353963396161613932643730663364643232376162393230
  6164

pg2s3_config: !vault |
  $ANSIBLE_VAULT;1.1;AES256
  64333736623330666566353331313337336434656431396535346666366539396634633031643330
  6332626532356263383932356662363237636664633262610a363634663032363032353865613538
  64656239336262383031613163346366326634663364633837646661613464363238623235333136
  3837663336393231390a353137353864346134366534313232343233623364653037663862626233
  63353437393237353733393063316534373137353562623636623733646363303331393562313932
  39303438383935616563353962363333646539356437643836633233663764656138383636303035
  32383734363133663039626665306261316664643666616536353236386135353661346463323234
  37646531613461313363323531373763633962386162356161613236303061663466386562393432
  38643337326332373437343731326430353930393164666639303133626134303366383336646133
  62366531373934643233313133653834613733623362373037623163636465666361636537373432
  61656232383130323061363465346231613539353235393438653162373562393432346665633064
  32343237366136646262383062623832343066643333633038663065666261363662616362643538
  35363765366635343962353739376231373039316239346265626230303962616139613364613933
  38393032336264383231646331666663323561643130363635353462656335633533346265346363
  38623562663463313234653137643231616262313764636261643365386436306139393766306639
  62393236623238303334623862393430393536333763366264666336613765373235613432373633
  37303131323665343538323636366238636261306562633561613262653934306565643661326330
  64323236663330313734363638653964353263656366623031353138653665633165363234333166
  36326137386439373335346564366238316566343737333137343734396262346636353234626334
  38396135626661353235633634613836383539366438646263316637633337636633376438643862
  61623937636466383635346338356265656331616663383863643463353631303030313663616466
  36616365623861346538366336313161306263306135303835386161366230623163326334373763
  32376464663231353938356433363535393563616336643332376435306631376534356434303035
  66626131363934363630613061393731643239303139653937633137346435313064386434323064
  64323739633738303330616532643934363933323532366238353462353538663164363338376634
  3064323437383734386533653032353166613630623236643831

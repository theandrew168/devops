---
server_hostname: bloggulus
server_mounted_volumes:
  - /mnt/bloggulus_db

postgresql_data_dir: /mnt/bloggulus_db/data
postgresql_unix_domain_socket_only: true

postgresql_users:
  - username: bloggulus
    password: !vault |
      $ANSIBLE_VAULT;1.1;AES256
      62623632383038306239663663373433663333326330643730383362336239376162613438366465
      3164316336366333373835663238323433656161396561620a353562383532656261653862336539
      30663831323236666236623437653030656661613136306135396565373136393561343136653630
      3366383936363938370a343038663436333661633336386139316537303938313235666166613562
      61616562646138373237336434343164326530313666646437396266336564386563346262636539
      3762646334653764636266303538636432383937626337613730

postgresql_databases:
  - name: bloggulus
    owner: bloggulus

# DB Version: 14
# OS Type: linux
# DB Type: web
# Total Memory (RAM): 1 GB
# CPUs num: 1
# Connections num: 50
# Data Storage: san
postgresql_tuning_parameters:
  - name: max_connections
    value: "50"
  - name: shared_buffers
    value: "256MB"
  - name: effective_cache_size
    value: "768MB"
  - name: maintenance_work_mem
    value: "64MB"
  - name: checkpoint_completion_target
    value: "0.9"
  - name: wal_buffers
    value: "7864kB"
  - name: default_statistics_target
    value: "100"
  - name: random_page_cost
    value: "1.1"
  - name: effective_io_concurrency
    value: "300"
  - name: work_mem
    value: "655kB"
  - name: min_wal_size
    value: "1GB"
  - name: max_wal_size
    value: "4GB"

mfd_config_path: /usr/local/src/bloggulus-svelte/mfd.toml
mfd_config: |
  [repo]
  url = "https://github.com/theandrew168/bloggulus-svelte"

  [build]
  commands = [
      ["npm", "install"],
      ["npm", "run", "build"],
  ]

caddy_config: |
  {
    servers {
      timeouts {
        read_body   10s
        read_header 5s
        write       30s
        idle        5m
      }
    }
  }
  www.bloggulus.com {
    redir https://bloggulus.com{uri} permanent
  }
  bloggulus.com {
    reverse_proxy 127.0.0.1:3000
  }

bloggulus_config: !vault |
  $ANSIBLE_VAULT;1.1;AES256
  37316434613837323665623238653938616632626261373231353739636666326433646337623835
  6564313735336435613862356234663232373864626166380a653339613937353837623863666635
  33373938383135383962306239393961356665623439653966656635663561343735623432383330
  3439376263633266320a386630386166663834633639343561663865663630306238633635623361
  33353563393438333333343866636231363964323335373463303165353963336464383966353361
  65306463346339646162313532306333333835653536643037656462346566316363356234323666
  32663433383731343038616338653139613437366334626237326233663963313730616461643737
  33396662643634623731393037333430353961346566613039303837303665663532373830646530
  38656635356164623233656264633434396635373031666635613165346334633234323034333865
  64323365653865386237383233313738353162323730306361393262383631643238303737316562
  30663239336165663561303137313263656362633533373037336139393339666338343631356366
  66666361383732323837613964386163383634616361353261653735353036393930666639373563
  65663333386463376462623033313065663463333566336461356131333264643065363664323066
  62643163386430303932393030663339313138646366386239333734653332656433376130353564
  34643564616663633935636237346430346139316137316466613234613366646662316339623833
  37383036303432633566653264363661633533343831326132323330636434613661393834333062
  35346532386366366637303034366664396666633466663238316166366163343134356139343031
  36616563316231383036383738326363333861336236656135363865373537376233633631336162
  61363335333264306639366632333935653762306134373739613766343337316438336536366637
  37616533303738616331636633383265336230613461396437643966336332393763613761653763
  64316266653831343837663761306666653462623065653839646532636330323761386163346434
  37613038653065643263336561626262393133653035343765653933343835656132346133343731
  39616634316239303132633561626333326630393533326562356132386536623331653063653064
  65303830386663623139363730316166623037623263666132613564343264366333623833363961
  64613666333838653333633762623862626438346463653030633331393830356362303063646632
  64313466316334386430633563333532653539383462333162303936343139313839663134646132
  31623931383238633135346632613737373165306237636465646132643834343838373435373363
  38313433333261303639393935326135306234336365353738343961646133663264383537313732
  64306433613732353736663033643861633931353536376636306235633339653366626662336266
  31626161393036363233386662626231346364376539643663663234643763383934653438663734
  38346139366138303864353536613762626239303961646666333531316337323766646532333937
  65303362353964343435363735346461366437663534613635333265363230646433316661653138
  30323562316135343435313662336534343932393137663130623037376263396434653633373066
  38646530636462663938323134373236663436373736663763646363373832386532613063363238
  32636534333036623231316465656138636536383439336133616633363737346638633931383864
  32346234393632336263636366373066636137386364326465343561663133636231346238636635
  37626630626636363937343531356130643662363239343861313761316566643036343636313664
  32393237376231626464326662633364383431633539373664323162353565373764316131393965
  61326436323531386333646133366566656662613535623534666332386565356539333961366666
  32323832666331366130396431656234366437633162623963396432666666323432363930616532
  35386666323234646566343831376564613562376133376436333566633533383139303731363536
  64306135356438333264623732643530626138646532633263613631366232313433353561306165
  63643438363566306637613532303434386236303332666365373061343137666366626665356261
  30613433326632333833323632643664646135343363343536376131333338363535613935336437
  65333962393532396665313462653965346462353438643135373837396639343332373330353964
  37303562373863663635666364356637303863303331343732313837356633313631386535373535
  36316161653861343230653162666436396634343632636562626431613938313962646338366365
  62616261346134343230316533303965373464633961623230303162346461343634393561303266
  39366434616330363535373332663364353831323038623638623139363233353033

pg2s3_config: !vault |
  $ANSIBLE_VAULT;1.1;AES256
  34626562623464663036343064363032656235636464666531316430346630306262656133646630
  6237303263623435346534386466373734366631343663380a336234376538393138356337643564
  66366666383334313065313732323964666264663933356361326265336366366564383930663239
  3632333963376533350a646239353330366163363936636165623930313334386338663866616561
  63323063616166393532343938633766386334316230356663663738636231313838343232643436
  34363961633664353838346332663037643831393030646639303561663766646433373133623663
  33386431393763656133303735663436343966636139636534353761356365613662346135336363
  36303864396164613561313331663434336533636437623532386633316166303436383134373634
  39613864373461393165363135356236363034353437653133633562663935353266306465636435
  39393862623966663932633937303761333461373833643730633735646164663438373131353938
  33303066666463376565373136343335303436353834353131303666396662303361303032666262
  31363566373330323836613463356431393338663831303535323866323039666133373930376132
  38623761656538633935653833353936363536613166376133623966313035653838643461313033
  37393033626361633430616430323235643632653136376664396634643665323937643564343734
  64616135306462656239386234393230383163613336653632383961646261613563646666343538
  33383465313563643663373165326438353037643066353533343335666139376239386164616437
  37626535643336343761366139353062663739323764353333386238363039633963363861326463
  65393938626531396362636433326164366135623166336439663631633561376336363936333962
  39323761383933663165663461366162363538626531623038666261663365336334626637373061
  62643535303536343332366338343632313362306363643838346366376566326435356431313061
  37346532663732306563623564363733326431333161343133656662323831383431646364306536
  36303163356539663435653836373363616138643239393565613233623332316166626365616439
  34333035663262313064306338383064613834353964656134616666373333396534656333393634
  35646664663632653832623837313865366636643961636535393066333236633063333162346134
  38316339303037616139363636323438663361343466313761353261623133393333323763303439
  6634333834356230643632313962396538663232343239353231
